<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <title>Meniu Ventilatoare</title>
  <style>
    body {
      text-align: center;
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      padding-top: 100px;
    }
    .button {
      padding: 15px 25px;
      font-size: 20px;
      font-weight: bold;
      border-radius: 10px;
      text-decoration: none;
      color: white;
      transition: 0.3s;
      box-shadow: 0px 3px 5px rgba(0, 0, 0, 0.2);
      display: inline-block;
      margin: 20px;
    }
    .green { background: #28a745; }
    .yellow { background: #ffc107; color: black; }
    .red { background: #dc3545; }
    .gray { background: #6c757d; }
    .button:hover { transform: scale(1.05); }
  </style>
</head>
<body>
  <h1>Meniu Monitorizare Ventilatoare</h1>

  <!-- Buton dinamic pentru sectiunea 1 -->
  <a id="sectiune1" href="sectiunea1.html" class="button green">Secțiunea 1</a>

  <script>
    const firebaseURL = "https://ventilator-5070b-default-rtdb.firebaseio.com/NivelZgomot";
    const auth = "DTgxk3pUhOHkQxn39j4784R3WN208FPNqwpevLVn";

    async function updateButtonStatus() {
      try {
        const res = await fetch(`${firebaseURL}.json?auth=${auth}`);
        const data = await res.json();
        const status = data.status || "normal";
        const comanda = data.comanda || "";
        const buton = document.getElementById("sectiune1");

        if (comanda === "oprire" || status === "oprit_automat") {
          buton.className = "button gray";
          buton.textContent = "Secțiunea 1 - inactivă";
        } else if (status === "alerta1" || status === "alerta2") {
          buton.className = "button yellow";
          buton.textContent = "Secțiunea 1 ⚠️";
        } else if (status === "normal") {
          buton.className = "button green";
          buton.textContent = "Secțiunea 1";
        }
      } catch (err) {
        console.error("Eroare Firebase:", err);
      }
    }

    window.onload = () => {
      updateButtonStatus();
      setInterval(updateButtonStatus, 5000);
    };
  </script>
</body>
</html>
